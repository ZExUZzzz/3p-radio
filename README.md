# 3P Radio
## Яндекс.радио с вашей рекламой

Приложение позволяет воспроизводить радиостанции сервиса яндекс.радио (яндекс.музыка) в перемешку с вашей рекламой, размещённой локально.

## Подготовка
Для работы приложения необходим python 3.7+ для API [yandex-music-api](https://github.com/MarshalX/yandex-music-api) (разрабатывалось и тестировалось на [3.9.12](https://www.python.org/downloads/release/python-3912/)).
После установки python необходимо установить yandex-music-api и pyglet:
```sh
pip install yandex-music
```
```sh
pip install pyglet
```
Для работы приложения необходим аккаунт яндекс с подпиской яндекс.плюс (без подписки не тестировалось). Приложение работает через токен авторизации, его можно получить с помощью сайта https://music-yandex-bot.ru.
После ввода ваших данных откроется окно переадресации на telegram, где в адресной строке будет содержаться ваш TOKEN в виде
```sh
t.me/music_yandex_bot?start={TOKEN}
```
Сохраните его, и никому не передавайте.

## Начало работы
Сохраните все файлы проекта в любую папку, которая не требует доступа администратора. В файл token.txt сохраните ваш токен. В файле to_adv.txt хранится целое положительное число - количество песен радио перед включением рекламы. Запуск осуществляется через 3p-radio-start.py При первом запуске приложение создаст 2 папки внутри проекта - adv и radio. Папка radio используется для воспроизведения радио и автоматически чиститься, с ней взаимодействовать не надо. В папку adv можно загружать вашу рекламу в формате .mp3 (если она будет пустая - будет играть только радио).

## Выбор радиостанции

Радиостанция выбирается в файле genre.txt - в виде набора тип:направление. По умолчанию установлено "mood:happy" - "настроение:радостное". Найти и вписать нужное вам радио можно на официальном сайте радио - https://radio.yandex.ru. Для этого перейдите на сайт, выберите нужную станцию и возьмите нужный набор из адресной строки. Например для настроение:радостное (mood:happy) адрес будет выглядеть как https://radio.yandex.ru/mood/happy, откуда нам надо взять всё, что после radio.yandex.ru/ и заменить слэш (/) на двоеточие (:).

## Текущее состояние

На данный момент программа функционирует согласно данному описанию. Критичных ошибок при правильной настройке выявлено не было. В будущем возможно будут доработки и улучшения.
